<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Role Presets — MedicLog</title>
    <meta name="description" content="QR codes to instantly configure MedicLog for your EMS certification level. Scan once, your app is configured.">
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        /* Presets page specific styles - uses CSS vars from styles.css */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--accent);
            text-decoration: none;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .back-link svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        h1 {
            font-size: 2.25rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 0.75rem;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
            line-height: 1.5;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Role Selection */
        .role-selector {
            margin: 2rem 0;
        }

        .role-selector h2 {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            text-align: center;
        }

        .role-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
        }

        .role-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .role-btn:hover {
            border-color: var(--text-muted);
            background: var(--bg-tertiary);
        }

        .role-btn.selected {
            border-color: var(--accent);
            background: var(--highlight-bg);
        }

        .role-btn .role-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .role-btn .role-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Tier colors for selected state */
        .role-btn[data-tier="emr"].selected { border-color: #78909c; }
        .role-btn[data-tier="emt-basic"].selected { border-color: #66bb6a; }
        .role-btn[data-tier="aemt"].selected { border-color: #ffa726; }
        .role-btn[data-tier="emt-varianced"].selected { border-color: #ab47bc; }
        .role-btn[data-tier="paramedic"].selected { border-color: #2196f3; }
        .role-btn[data-tier="critical-care"].selected { border-color: #ef5350; }

        /* QR Display Area */
        .qr-display {
            display: none;
            text-align: center;
            margin: 2rem 0;
            padding: 2rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
        }

        .qr-display.visible {
            display: block;
        }

        .qr-display h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .qr-display .role-description {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .qr-container {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            display: inline-block;
            margin-bottom: 1.5rem;
        }

        .qr-container canvas {
            display: block;
        }

        .scan-instruction {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        /* Details Section */
        .details-section {
            text-align: left;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .details-item {
            margin-bottom: 0.5rem;
        }

        .details-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.375rem;
        }

        .details-list {
            list-style: none;
        }

        .details-list li {
            font-size: 0.85rem;
            color: var(--text-secondary);
            padding: 0.2rem 0;
            padding-left: 1rem;
            position: relative;
        }

        .details-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.5em;
            width: 6px;
            height: 6px;
            background: var(--text-muted);
            border-radius: 50%;
        }

        .details-list li.included::before {
            background: #4caf50;
        }

        .details-list li.excluded::before {
            background: #f44336;
        }

        .url-scheme {
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            background: var(--code-bg);
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            margin-top: 1rem;
            display: inline-block;
        }

        @media (max-width: 480px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.75rem;
            }

            .role-buttons {
                grid-template-columns: 1fr 1fr;
            }

            .role-btn {
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">
                <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                Back to MedicLog
            </a>
            <h1>Role Presets</h1>
            <p class="subtitle">Select your certification level to get a QR code that instantly configures MedicLog for your scope of practice.</p>
        </header>

        <div class="role-selector">
            <h2>Select Your Role</h2>
            <div class="role-buttons">
                <button class="role-btn" data-tier="emr" onclick="selectRole('emr')">
                    <div class="role-name">EMR</div>
                    <div class="role-subtitle">Emergency Medical Responder</div>
                </button>
                <button class="role-btn" data-tier="emt-basic" onclick="selectRole('emt-basic')">
                    <div class="role-name">EMT-Basic</div>
                    <div class="role-subtitle">Emergency Medical Technician</div>
                </button>
                <button class="role-btn" data-tier="aemt" onclick="selectRole('aemt')">
                    <div class="role-name">AEMT</div>
                    <div class="role-subtitle">Advanced EMT</div>
                </button>
                <button class="role-btn" data-tier="emt-varianced" onclick="selectRole('emt-varianced')">
                    <div class="role-name">EMT-Varianced</div>
                    <div class="role-subtitle">EMT-IV / Expanded Scope</div>
                </button>
                <button class="role-btn" data-tier="paramedic" onclick="selectRole('paramedic')">
                    <div class="role-name">Paramedic</div>
                    <div class="role-subtitle">NRP / Licensed Paramedic</div>
                </button>
                <button class="role-btn" data-tier="critical-care" onclick="selectRole('critical-care')">
                    <div class="role-name">Critical Care</div>
                    <div class="role-subtitle">CCP / FP-C / Flight</div>
                </button>
            </div>
        </div>

        <div class="qr-display" id="qr-display">
            <h3 id="selected-role-name"></h3>
            <p class="role-description" id="selected-role-desc"></p>

            <div class="qr-container">
                <canvas id="qr-canvas"></canvas>
            </div>

            <p class="scan-instruction">Point your iPhone camera at this QR code to configure MedicLog</p>

            <div class="details-section">
                <div class="details-grid" id="details-grid">
                    <!-- Populated by JS -->
                </div>
                <div class="url-scheme" id="url-scheme"></div>
            </div>
        </div>
    </div>

    <footer>&copy; 2026 MedicLog</footer>

    <script>
        const roleData = {
            'emr': {
                name: 'EMR',
                fullName: 'Emergency Medical Responder',
                description: 'Entry-level certification focused on vital signs assessment and basic life support. No medication administration.',
                url: 'mediclog://config?preset=emr',
                details: {
                    'Vitals': ['included:All vital signs monitoring'],
                    'Airways': ['included:OPA / NPA', 'excluded:No advanced airways'],
                    'Cardiac': ['included:CPR', 'included:AED'],
                    'Medications': ['excluded:No medications'],
                    'IV/IO Access': ['excluded:None'],
                    'Timers': ['excluded:OFF']
                }
            },
            'emt-basic': {
                name: 'EMT-Basic',
                fullName: 'Emergency Medical Technician',
                description: 'Standard EMT certification with fixed-dose medications and BLS interventions.',
                url: 'mediclog://config?preset=emt-basic',
                details: {
                    'Vitals': ['included:All vital signs monitoring'],
                    'Airways': ['included:OPA / NPA', 'included:BVM', 'excluded:No supraglottic / ETT'],
                    'Cardiac': ['included:CPR', 'included:AED'],
                    'Medications': ['included:Aspirin 324mg', 'included:Epi auto-injector', 'included:Oxygen', 'included:Oral glucose', 'included:Naloxone'],
                    'IV/IO Access': ['excluded:None'],
                    'Timers': ['excluded:OFF']
                }
            },
            'aemt': {
                name: 'AEMT',
                fullName: 'Advanced Emergency Medical Technician',
                description: 'NREMT Advanced EMT with IV access and limited ALS medications. Bridge between EMT and Paramedic scope.',
                url: 'mediclog://config?preset=aemt',
                details: {
                    'Vitals': ['included:All vital signs monitoring'],
                    'Airways': ['included:OPA / NPA', 'included:BVM', 'included:Supraglottic (iGel, King)', 'excluded:No ETT'],
                    'Cardiac': ['included:CPR', 'included:AED'],
                    'Medications': ['included:All EMT-Basic meds', 'included:Limited ALS meds (state-dependent)'],
                    'IV/IO Access': ['included:IV access'],
                    'Timers': ['included:ON']
                }
            },
            'emt-varianced': {
                name: 'EMT-Varianced',
                fullName: 'EMT-IV / Expanded Scope',
                description: 'State variance or expanded scope EMT with IV/IO access and fixed-dose medications only. No weight-based dosing.',
                url: 'mediclog://config?preset=emt-varianced',
                details: {
                    'Vitals': ['included:All vital signs monitoring'],
                    'Airways': ['included:OPA / NPA', 'included:BVM', 'included:Supraglottic (iGel, King)', 'excluded:No ETT / surgical'],
                    'Cardiac': ['included:CPR', 'included:AED', 'excluded:No manual defib / pacing'],
                    'Medications': ['included:Naloxone 4mg IN', 'included:Epi 0.3mg IM', 'included:Zofran 4mg ODT', 'included:Aspirin', 'excluded:No mg/kg or titrated meds'],
                    'IV/IO Access': ['included:IV access', 'included:IO access'],
                    'Timers': ['included:ON']
                }
            },
            'paramedic': {
                name: 'Paramedic',
                fullName: 'NRP / Licensed Paramedic',
                description: 'Full ALS scope with complete formulary, advanced airways, and comprehensive cardiac interventions.',
                url: 'mediclog://config?preset=paramedic',
                details: {
                    'Vitals': ['included:All vital signs monitoring'],
                    'Airways': ['included:OPA / NPA / BVM', 'included:Supraglottic', 'included:ETT / intubation', 'included:Surgical cric'],
                    'Cardiac': ['included:CPR / AED', 'included:Manual defibrillation', 'included:Cardioversion / pacing', 'included:12-lead ECG'],
                    'Medications': ['included:Full formulary', 'included:Weight-based dosing', 'included:Titrated infusions'],
                    'IV/IO Access': ['included:IV access', 'included:IO access'],
                    'Timers': ['included:ON']
                }
            },
            'critical-care': {
                name: 'Critical Care / Flight',
                fullName: 'CCP / FP-C / CFRN',
                description: 'Extended scope for critical care transport. Includes pressors, sedation, paralytics, blood products, and vent management.',
                url: 'mediclog://config?preset=critical-care',
                details: {
                    'Vitals': ['included:All vital signs', 'included:Invasive monitoring (art lines)'],
                    'Airways': ['included:All paramedic airways', 'included:Ventilator management', 'included:RSI / DSI'],
                    'Cardiac': ['included:All paramedic cardiac', 'included:Advanced hemodynamics'],
                    'Medications': ['included:Full paramedic formulary', 'included:Vasopressors / inotropes', 'included:Sedation / paralytics', 'included:Blood products'],
                    'IV/IO Access': ['included:IV / IO access', 'included:Central line management'],
                    'Timers': ['included:ON']
                }
            }
        };

        let currentRole = null;

        function selectRole(role) {
            // Update button states
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelector(`[data-tier="${role}"]`).classList.add('selected');

            // Get role data
            const data = roleData[role];
            currentRole = role;

            // Update display
            document.getElementById('selected-role-name').textContent = data.name + ' — ' + data.fullName;
            document.getElementById('selected-role-desc').textContent = data.description;
            document.getElementById('url-scheme').textContent = data.url;

            // Generate QR code (always dark on light for scannability)
            const canvas = document.getElementById('qr-canvas');
            QRCode.toCanvas(canvas, data.url, {
                width: 250,
                margin: 2,
                color: {
                    dark: '#000000',
                    light: '#ffffff'
                }
            }, function (error) {
                if (error) console.error(error);
            });

            // Build details grid
            const detailsGrid = document.getElementById('details-grid');
            detailsGrid.innerHTML = '';

            for (const [label, items] of Object.entries(data.details)) {
                const detailItem = document.createElement('div');
                detailItem.className = 'details-item';

                let html = `<div class="details-label">${label}</div><ul class="details-list">`;
                items.forEach(item => {
                    const [status, text] = item.split(':');
                    html += `<li class="${status}">${text}</li>`;
                });
                html += '</ul>';

                detailItem.innerHTML = html;
                detailsGrid.appendChild(detailItem);
            }

            // Show QR display
            document.getElementById('qr-display').classList.add('visible');

            // Scroll to QR code
            document.getElementById('qr-display').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
